# name: Deploy Angular to GitHub Pages

# on:
#   push:
#     branches:
#       - development # change to your default branch if not 'main'

# jobs:
#   deploy:
#     runs-on: ubuntu-latest

#     steps:
#       - name: Checkout
#         uses: actions/checkout@v4

#       - name: Use Node.js 22.17.0
#         uses: actions/setup-node@v4
#         with:
#           node-version: "22.17.0"

#       - name: Install dependencies
#         run: npm ci

#       - name: Build (production)
#         run: npm run build -- --configuration=production

#       - name: Deploy to GitHub Pages
#         env:
#           GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
#         run: npx angular-cli-ghpages --dir=dist/ngxs --no-silent --message "Deploy from GitHub Actions"

name: Deploy Angular to GitHub Pages

on:
  push:
    branches:
      - main # üëà change if your default branch is different

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "20.x" # üëà Angular CLI requires >= v20.19

      - name: Install dependencies
        run: npm ci

      - name: Build Angular app
        run: npm run build -- --configuration=production

      - name: Verify build output
        run: |
          echo "Checking dist folder..."
          ls -la dist || true
          # adjust folder name if your project name is different
          if [ ! -f dist/Angular/index.html ]; then
            echo "‚ùå dist/Angular/index.html not found! Check your angular.json 'outputPath' and update the --dir below."
            exit 1
          fi

      - name: Deploy to GitHub Pages
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: npx angular-cli-ghpages --dir=dist/Angular --no-silent --message "Deploy from GitHub Actions"
